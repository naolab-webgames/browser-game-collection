# Webブラウザフリーゲーム集 要件定義書

## プロジェクト概要
Webブラウザで遊べる複数のカジュアルゲームを提供するフリーゲームサイト。
ゲーム開始・終了時に広告を表示し、収益化を図る。

---

## 1. システム構成 ✅ (コミット済)

### 1.1 アーキテクチャ概要
- **構成パターン**: 完全静的サイト（JAMstack）
- **フロントエンド**: HTML5 / CSS3 / Vanilla JavaScript
- **バックエンド**: なし（サーバーレス）

### 1.2 ホスティング環境
- **開発環境**: ローカル（Live ServerまたはローカルHTTPサーバー）
- **本番環境**: GitHub Pages
  - 理由：完全無料、独自ドメイン設定可能、Git連携で自動デプロイ
  - URL形式：`https://<username>.github.io/<repository>/`

### 1.3 技術スタック
- **言語**: HTML5, CSS3, JavaScript (ES6+)
- **フレームワーク**: なし（Vanilla JS）
- **ビルドツール**: 不要（静的ファイルをそのまま配信）

### 1.4 データ管理
- **データ保存先**: ブラウザのLocalStorage
- **保存内容**: ゲームごとのハイスコア、プレイ回数などの個人記録
- **特性**: デバイスローカルのみ、サーバー同期なし

### 1.5 外部マスタ管理
- **ゲームメタデータ**: JSON形式で管理（タイトル、説明、サムネイルパス、難易度など）
- **サイト設定**: JSON形式で管理（サイト説明、バージョン情報など）
- **多言語対応**: 将来的な多言語展開を考慮した構造
- **メリット**: コード修正なしでコンテンツ更新が可能

### 1.6 広告システム
- **広告プラットフォーム**: Google AdSense
- **実装方法**: JavaScriptタグ埋め込み
- **表示タイミング**: ゲーム開始前・終了後

### 1.7 バージョン管理
- **リポジトリ**: Git / GitHub
- **ブランチ戦略**: main（本番）/ develop（開発）

### 1.8 プロジェクトフォルダ構成
```
browser-game-collection/
├── docs/                          # ドキュメント
│   ├── requirements.md           # 全体要件定義書
│   ├── design/                   # 設計書
│   ├── review/                   # レビュー記録・指摘表
│   └── games/                    # 各ゲームの要件定義書
│       ├── memory-game.md        # 神経衰弱の要件定義
│       ├── tic-tac-toe.md        # ○×ゲームの要件定義
│       └── whack-a-mole.md       # もぐら叩きの要件定義
├── src/                          # ソースコード
│   ├── index.html                # トップページ
│   ├── css/                      # スタイルシート
│   │   ├── common.css           # 共通スタイル
│   │   └── games/               # ゲーム個別スタイル
│   ├── js/                       # JavaScript
│   │   ├── common/              # 共通モジュール
│   │   │   ├── storage.js       # LocalStorage管理
│   │   │   ├── ads.js           # 広告管理
│   │   │   └── utils.js         # ユーティリティ
│   │   └── games/               # ゲーム個別ロジック
│   │       ├── memory-game/     # 神経衰弱
│   │       ├── tic-tac-toe/     # ○×ゲーム
│   │       └── whack-a-mole/    # もぐら叩き
│   ├── games/                    # ゲーム画面HTML
│   │   ├── memory-game.html
│   │   ├── tic-tac-toe.html
│   │   └── whack-a-mole.html
│   ├── assets/                   # 静的リソース
│   │   ├── images/              # 画像
│   │   │   ├── thumbnails/      # サムネイル
│   │   │   └── games/           # ゲーム内画像
│   │   └── data/                # 外部マスタデータ
│   │       ├── games.json       # ゲーム一覧メタデータ
│   │       └── site-config.json # サイト設定
│   └── tests/                    # テストコード
│       ├── common/
│       └── games/
├── README.md                      # プロジェクト説明
└── .gitignore

```

**フォルダ構成の設計方針**
- ゲームごとに独立したファイル・フォルダで管理
- 共通機能は`common/`配下で一元管理
- ドキュメントもゲームごとに分離し、保守性を向上
- 外部マスタは`assets/data/`で管理し、コードとデータを分離

---

## 2. 用語定義 ✅ (コミット済)

### 2.1 画面・ページ関連
| 用語 | 定義 |
|------|------|
| トップページ | サイトの最初の画面。ゲーム一覧が表示され、ユーザーがプレイするゲームを選択する |
| ゲーム画面 | 個々のゲームをプレイする画面。ゲームのUI・操作・進行が行われる |

### 2.2 ユーザー関連
| 用語 | 定義 |
|------|------|
| ユーザー | 本サイトの利用者。ゲームをプレイする人 |

### 2.3 ゲームプレイ関連
| 用語 | 定義 |
|------|------|
| スコア | ゲーム中の得点・成績 |
| ハイスコア | ユーザーが過去に獲得した最高のスコア。LocalStorageに保存される |
| リトライ | ゲーム終了後に同じゲームをもう一度プレイすること |

### 2.4 システム関連
| 用語 | 定義 |
|------|------|
| 広告モジュール | Google AdSenseを使用した広告表示の仕組み全体 |
| LocalStorage | ブラウザに標準搭載されているデータ保存機能。ハイスコアなどを保存 |

## 3. 規模（スケール） ✅ (コミット済)

### 3.1 ゲームコンテンツ規模
| 項目 | 初期リリース | 将来目標 |
|------|-------------|---------|
| ゲーム数 | 3種類 | 50種類 |
| 開発期間（想定） | 約2週間 | 段階的に拡張 |

**初期リリースゲーム候補（3種類）**
1. 神経衰弱
2. ○×ゲーム
3. もぐら叩き

### 3.2 ユーザー規模
| 項目 | 目標値 | 備考 |
|------|-------|------|
| 月間アクティブユーザー数 | ~10,000人 | GitHub Pagesで十分対応可能 |
| 想定同時接続数 | ~100人 | 静的サイトのため問題なし |

### 3.3 パフォーマンス目標
| 項目 | 目標値 | 測定条件 |
|------|-------|---------|
| トップページ読み込み時間 | 3秒以内 | 通常のブロードバンド接続 |
| ゲーム画面読み込み時間 | 2秒以内 | 画面遷移時 |
| 1ゲームあたりのファイルサイズ | 100KB以内 | HTML+CSS+JS合計（画像除く） |
| トップページファイルサイズ | 200KB以内 | 全リソース合計 |

### 3.4 データ規模
| 項目 | 想定値 | 備考 |
|------|-------|------|
| LocalStorage使用量（1ユーザー） | ~10KB | ハイスコア・設定など |
| ゲームあたり保存データ | ~1KB | スコア、プレイ回数など |

## 4. 機能定義 ✅ (コミット済)

### 4.1 トップページ機能
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|-------|------|--------|
| F-TOP-01 | サイト説明表示 | サイトの概要を1-2文で表示 | 高 |
| F-TOP-02 | ゲーム一覧表示 | プレイ可能なゲームをカード形式で一覧表示 | 高 |
| F-TOP-03 | サムネイル表示 | 各ゲームのサムネイル画像を表示 | 高 |
| F-TOP-04 | ハイスコア表示 | 各ゲームカードに自分のハイスコアを表示 | 高 |
| F-TOP-05 | ゲーム選択 | ゲームをクリックして該当ゲーム画面へ遷移 | 高 |
| F-TOP-06 | 広告表示（バナー） | Google AdSenseバナー広告を表示 | 高 |
| F-TOP-07 | 検索・フィルタ機能 | ゲーム数が増えた際に実装予定 | 低（将来対応） |

### 4.2 ゲーム画面共通機能
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|-------|------|--------|
| F-GAME-01 | ゲームプレイ | 各ゲームのメインロジック実行 | 高 |
| F-GAME-02 | スコア表示 | ゲーム中の現在スコアをリアルタイム表示 | 高 |
| F-GAME-03 | トップに戻るボタン | トップページへ戻るボタンを常時表示 | 高 |
| F-GAME-04 | ゲーム開始前広告 | ゲーム選択後、プレイ開始前に広告を表示 | 高 |
| F-GAME-05 | ゲーム終了処理 | ゲームオーバー時の結果表示 | 高 |
| F-GAME-06 | ハイスコア判定 | 終了時にハイスコア更新をチェック | 高 |
| F-GAME-07 | ハイスコア通知 | 更新時に「New Record!」などを表示 | 高 |
| F-GAME-08 | リトライボタン | ゲーム終了後に同じゲームを再プレイ | 高 |
| F-GAME-09 | ゲーム終了後広告 | ゲームオーバー時に広告を表示 | 高 |
| F-GAME-10 | サウンド・効果音 | BGMや効果音の再生 | 低（将来対応） |

### 4.3 データ管理機能
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|-------|------|--------|
| F-DATA-01 | ハイスコア保存 | LocalStorageにハイスコアを保存 | 高 |
| F-DATA-02 | ハイスコア読み込み | ページ読み込み時にハイスコアを取得 | 高 |
| F-DATA-03 | データリセット機能 | LocalStorageをクリアする機能 | 中（将来対応） |

### 4.4 広告モジュール機能
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|-------|------|--------|
| F-AD-01 | トップページ広告 | バナー広告をトップページに表示 | 高 |
| F-AD-02 | ゲーム開始前広告 | インタースティシャル広告を表示 | 高 |
| F-AD-03 | ゲーム終了後広告 | インタースティシャル広告を表示 | 高 |
| F-AD-04 | 広告スキップ機能 | 5秒後にスキップ可能 | 中 |

### 4.5 UI/UX機能
| 機能ID | 機能名 | 説明 | 優先度 |
|--------|-------|------|--------|
| F-UI-01 | レスポンシブ対応 | PC画面に最適化 | 高 |
| F-UI-02 | ローディング表示 | リソース読み込み中の表示 | 中 |
| F-UI-03 | エラーハンドリング | エラー発生時の適切なメッセージ表示 | 中 |
| F-UI-04 | ダークモード | ダークテーマの提供 | 低（将来対応） |

### 4.6 将来実装予定機能（初期リリースには含まない）
- 検索・フィルタ機能（ゲーム数増加時）
- サウンド・効果音
- ダークモード
- スマホ・タブレット対応（レスポンシブ）
- データリセット機能
- ゲームカテゴリ分類
- プレイ回数の記録・表示

## 5. 非機能定義 ✅ (コミット済)

### 5.1 パフォーマンス要件
| 項目 | 要件 | 測定方法 |
|------|------|---------|
| トップページ読み込み時間 | 3秒以内 | Chrome DevTools（通常のブロードバンド） |
| ゲーム画面読み込み時間 | 2秒以内 | 画面遷移時の体感速度 |
| ゲーム動作FPS | 30fps以上 | アニメーションの滑らかさ |
| メモリ使用量 | 100MB以内 | ブラウザタブあたり |

### 5.2 可用性要件
| 項目 | 要件 | 備考 |
|------|------|------|
| 稼働率 | 99%以上 | GitHub Pagesの標準SLA |
| ダウンタイム | GitHub Pages依存 | メンテナンスはGitHub側に依存 |

### 5.3 互換性要件
| 項目 | 要件 | 備考 |
|------|------|------|
| 対応ブラウザ | Chrome, Edge, Firefox, Safari（最新2バージョン） | モダンブラウザのみ |
| 対応デバイス | PC（デスクトップ） | 初期はPC専用 |
| 画面解像度 | 1280x720以上推奨 | 最小1024x768 |
| 言語 | 英語 | 全世界からのアクセスを想定 |

### 5.4 セキュリティ要件
| 項目 | 要件 | 実装方法 |
|------|------|---------|
| 通信の暗号化 | HTTPS必須 | GitHub Pages標準対応 |
| XSS対策 | 基本的な対策 | ユーザー入力のエスケープ処理 |
| LocalStorage保護 | 機密情報は保存しない | スコアのみ保存、個人情報なし |
| 広告スクリプト | Google AdSense公式のみ | 信頼できるソースからのみ読み込み |

### 5.5 保守性要件
| 項目 | 要件 | 実装方法 |
|------|------|---------|
| コードの可読性 | 高 | 命名規則の統一、適切な関数分割 |
| コメント | 必要最小限 | 複雑なロジックのみコメント記載 |
| ファイル構成 | モジュール化 | ゲームごとに独立したファイル |
| コードレビュー | 実施 | PM視点でのレビュー |
| 外部マスタ管理 | 実装 | 説明文、ゲーム一覧などの頻繁に更新される内容はJSON等の外部ファイルで管理 |
| 設定の分離 | 実装 | ゲームメタデータ（タイトル、説明、難易度など）を外部設定ファイルで管理 |

### 5.6 拡張性要件
| 項目 | 要件 | 備考 |
|------|------|------|
| ゲーム追加の容易さ | 高 | テンプレート化された構造 |
| 共通機能の再利用 | 可能 | スコア管理、広告表示など共通化 |
| 将来の機能追加 | 考慮 | プラグイン的に機能追加できる設計 |

### 5.7 テスト要件
| 項目 | 要件 | 範囲 |
|------|------|------|
| 単体テスト | 主要ロジックに実装 | ゲームロジック、スコア計算など |
| 手動テスト | 全機能で実施 | リリース前に必ず実施 |
| ブラウザテスト | 対応ブラウザ全て | Chrome, Edge, Firefox, Safari |

### 5.8 ドキュメント要件
| 項目 | 要件 | 内容 |
|------|------|------|
| README.md | 詳細版 | プロジェクト概要、セットアップ手順、デプロイ方法、設計思想、トラブルシューティング |
| 要件定義書 | 本ドキュメント | システム構成、機能、非機能要件 |
| 設計書 | 作成予定 | 画面設計、データ設計、API設計など |
| レビュー記録 | 作成予定 | 指摘事項の履歴管理 |

### 5.9 アクセシビリティ要件
| 項目 | 要件 | 実装方法 |
|------|------|---------|
| セマンティックHTML | 使用 | header, main, nav等の適切な使用 |
| 画像のalt属性 | 必須 | すべての画像にalt設定 |
| キーボード操作 | 基本対応 | Tabキーでのフォーカス移動 |
| ARIA属性 | 基本的な使用 | role, aria-label等を必要に応じて設定 |

### 5.10 運用要件
| 項目 | 要件 | 備考 |
|------|------|------|
| デプロイ方法 | Git push自動デプロイ | GitHub Pagesの機能を利用 |
| バージョン管理 | Git/GitHub | main/developブランチ運用 |
| 監視・ログ | 不要 | 静的サイトのため最小限 |
| バックアップ | Git履歴 | Gitリポジトリが完全なバックアップ |

---

**更新履歴**
- 2026-02-22: システム構成をコミット
- 2026-02-22: 用語定義をコミット
- 2026-02-22: 規模（スケール）をコミット
- 2026-02-22: 機能定義をコミット
- 2026-02-22: 非機能定義をコミット
- 2026-02-22: 言語要件（英語）を追加
- 2026-02-22: 外部マスタ管理要件を追加
- 2026-02-22: プロジェクトフォルダ構成を定義
